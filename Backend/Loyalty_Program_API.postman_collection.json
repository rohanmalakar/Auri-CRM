{
  "info": {
    "name": "Loyalty Program API",
    "description": "Complete test collection for Loyalty Program creation API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Points Program - Mixed Rewards",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}",
            "description": "Replace with your actual JWT token"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"POINTS\",\n  \"nameEn\": \"VIP Points Rewards\",\n  \"nameAr\": \"مكافآت النقاط الكبار\",\n  \"descriptionEn\": \"Earn points on every purchase and redeem for exclusive rewards\",\n  \"descriptionAr\": \"احصل على نقاط في كل عملية شراء واستبدلها بمكافآت حصرية\",\n  \"termsEn\": \"Points are non-transferable and expire after 12 months. See full terms and conditions.\",\n  \"termsAr\": \"النقاط غير قابلة للتحويل وتنتهي صلاحيتها بعد 12 شهرًا. انظر الشروط والأحكام الكاملة.\",\n  \"howToUseEn\": \"Show your loyalty card at checkout to earn and redeem points\",\n  \"howToUseAr\": \"أظهر بطاقة الولاء الخاصة بك عند الدفع لكسب النقاط واستردادها\",\n  \"status\": \"ACTIVE\",\n  \"pointsRules\": {\n    \"currencyCode\": \"SAR\",\n    \"earnPointsPerCurrency\": 1,\n    \"minSpendToEarn\": 10,\n    \"roundingMode\": \"FLOOR\",\n    \"pointValueCurrency\": 0.1,\n    \"pointTaxPercent\": 5,\n    \"expiryDurationValue\": 12,\n    \"expiryDurationUnit\": \"MONTH\"\n  },\n  \"pointsWalletDesign\": {\n    \"cardColor\": \"#0000e5\",\n    \"cardTitleColor\": \"#ffffff\",\n    \"cardTextColor\": \"#e7ecfe\",\n    \"stripImageUrl\": \"https://example.com/strip.png\",\n    \"logoUrl\": \"https://example.com/logo.png\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"10% Off Discount\",\n      \"voucherNameAr\": \"خصم 10٪\",\n      \"voucherDescriptionEn\": \"Get 10% off your next purchase\",\n      \"voucherDescriptionAr\": \"احصل على خصم 10٪ على عملية الشراء التالية\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costPoints\": 100,\n      \"discount\": {\n        \"discountPercentage\": 10,\n        \"maxDiscountAmount\": 50,\n        \"currencyCode\": \"SAR\"\n      }\n    },\n    {\n      \"voucherNameEn\": \"Free Coffee\",\n      \"voucherNameAr\": \"قهوة مجانية\",\n      \"voucherDescriptionEn\": \"Redeem for a free coffee of your choice\",\n      \"voucherDescriptionAr\": \"استبدل بقهوة مجانية من اختيارك\",\n      \"rewardType\": \"FREE_PRODUCT\",\n      \"costPoints\": 50,\n      \"freeProducts\": [\n        {\n          \"productSource\": \"INTERNAL\",\n          \"internalProductId\": 123,\n          \"qtyFree\": 1\n        }\n      ]\n    },\n    {\n      \"voucherNameEn\": \"20% Off Premium Items\",\n      \"voucherNameAr\": \"خصم 20٪ على العناصر المميزة\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costPoints\": 200,\n      \"discount\": {\n        \"discountPercentage\": 20,\n        \"maxDiscountAmount\": 100,\n        \"currencyCode\": \"SAR\"\n      }\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        }
      },
      "response": []
    },
    {
      "name": "2. Stamps Program - PER_VISIT",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"STAMPS\",\n  \"nameEn\": \"Coffee Loyalty Card\",\n  \"nameAr\": \"بطاقة ولاء القهوة\",\n  \"descriptionEn\": \"Collect 10 stamps and get a free coffee\",\n  \"descriptionAr\": \"اجمع 10 طوابع واحصل على قهوة مجانية\",\n  \"termsEn\": \"One stamp per visit. Card valid for 6 months from first stamp.\",\n  \"termsAr\": \"ختم واحد لكل زيارة. البطاقة صالحة لمدة 6 أشهر من الختم الأول.\",\n  \"howToUseEn\": \"Present your digital card at each visit to collect stamps\",\n  \"howToUseAr\": \"قدم بطاقتك الرقمية في كل زيارة لجمع الطوابع\",\n  \"status\": \"ACTIVE\",\n  \"stampsRules\": {\n    \"stampsTarget\": 10,\n    \"accrualRule\": \"PER_VISIT\",\n    \"timeRestrictionUnit\": \"NONE\",\n    \"timeRestrictionValue\": 0,\n    \"visitLimitMode\": \"UNLIMITED\",\n    \"limitScope\": \"ORG\"\n  },\n  \"stampsWalletDesign\": {\n    \"cardColor\": \"#ff6b35\",\n    \"cardTitleColor\": \"#ffffff\",\n    \"cardTextColor\": \"#ffe5d9\",\n    \"stripImageUrl\": \"https://example.com/coffee-strip.png\",\n    \"logoUrl\": \"https://example.com/coffee-logo.png\",\n    \"fulfilledStampIconKey\": \"CHECK\",\n    \"fulfilledStampColor\": \"#00ff00\",\n    \"unfulfilledStampIconKey\": \"CIRCLE\",\n    \"unfulfilledStampColor\": \"#cccccc\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Free Coffee Reward\",\n      \"voucherNameAr\": \"مكافأة القهوة المجانية\",\n      \"voucherDescriptionEn\": \"Redeem your completed card for a free coffee\",\n      \"voucherDescriptionAr\": \"استبدل بطاقتك المكتملة بقهوة مجانية\",\n      \"rewardType\": \"FREE_PRODUCT\",\n      \"costStamps\": 10,\n      \"freeProducts\": [\n        {\n          \"productSource\": \"INTERNAL\",\n          \"internalProductId\": 456,\n          \"qtyFree\": 1\n        }\n      ]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        }
      },
      "response": []
    },
    {
      "name": "3. Stamps Program - PER_ITEM with Products",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"STAMPS\",\n  \"nameEn\": \"Meal Stamps Program\",\n  \"nameAr\": \"برنامج طوابع الوجبات\",\n  \"descriptionEn\": \"Buy specific items and collect stamps to earn rewards\",\n  \"descriptionAr\": \"اشتر عناصر محددة واجمع الطوابع لكسب المكافآت\",\n  \"termsEn\": \"Only eligible products earn stamps. Maximum 3 stamps per day per branch.\",\n  \"termsAr\": \"المنتجات المؤهلة فقط تكسب الطوابع. الحد الأقصى 3 طوابع يوميًا لكل فرع.\",\n  \"howToUseEn\": \"Purchase qualifying products to automatically receive stamps\",\n  \"howToUseAr\": \"اشترِ المنتجات المؤهلة لتلقي الطوابع تلقائيًا\",\n  \"status\": \"ACTIVE\",\n  \"stampsRules\": {\n    \"stampsTarget\": 15,\n    \"accrualRule\": \"PER_ITEM\",\n    \"timeRestrictionUnit\": \"DAY\",\n    \"timeRestrictionValue\": 1,\n    \"visitLimitMode\": \"MAX_PER_WINDOW\",\n    \"maxPerWindow\": 3,\n    \"limitScope\": \"BRANCH\"\n  },\n  \"stampsWalletDesign\": {\n    \"cardColor\": \"#2a9d8f\",\n    \"cardTitleColor\": \"#ffffff\",\n    \"cardTextColor\": \"#e9f5f4\",\n    \"stripImageUrl\": \"https://example.com/meal-strip.png\",\n    \"fulfilledStampIconKey\": \"STAR\",\n    \"fulfilledStampColor\": \"#ffd700\",\n    \"unfulfilledStampIconKey\": \"STAR_OUTLINE\",\n    \"unfulfilledStampColor\": \"#d3d3d3\"\n  },\n  \"stampsAccrualProducts\": [\n    {\n      \"productSource\": \"INTERNAL\",\n      \"internalProductId\": 101,\n      \"stampsPerItem\": 1\n    },\n    {\n      \"productSource\": \"INTERNAL\",\n      \"internalProductId\": 102,\n      \"stampsPerItem\": 2\n    },\n    {\n      \"productSource\": \"FOODICS\",\n      \"externalProductId\": \"foodics-product-abc123\",\n      \"stampsPerItem\": 1\n    }\n  ],\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Free Burger\",\n      \"voucherNameAr\": \"برغر مجاني\",\n      \"rewardType\": \"FREE_PRODUCT\",\n      \"costStamps\": 15,\n      \"freeProducts\": [\n        {\n          \"productSource\": \"INTERNAL\",\n          \"internalProductId\": 201,\n          \"qtyFree\": 1\n        }\n      ]\n    },\n    {\n      \"voucherNameEn\": \"50% Off Any Meal\",\n      \"voucherNameAr\": \"خصم 50٪ على أي وجبة\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costStamps\": 20,\n      \"discount\": {\n        \"discountPercentage\": 50,\n        \"currencyCode\": \"SAR\"\n      }\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        }
      },
      "response": []
    },
    {
      "name": "4. Points Program - Multiple Rewards",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"POINTS\",\n  \"nameEn\": \"Gold Member Rewards\",\n  \"nameAr\": \"مكافآت الأعضاء الذهبيين\",\n  \"descriptionEn\": \"Premium rewards program for our valued customers\",\n  \"termsEn\": \"Points expire 24 months after earning. Non-refundable.\",\n  \"howToUseEn\": \"Use your member app or card to earn and spend points\",\n  \"status\": \"ACTIVE\",\n  \"pointsRules\": {\n    \"currencyCode\": \"SAR\",\n    \"earnPointsPerCurrency\": 2,\n    \"minSpendToEarn\": 5,\n    \"roundingMode\": \"ROUND\",\n    \"pointValueCurrency\": 0.05,\n    \"pointTaxPercent\": 0,\n    \"expiryDurationValue\": 24,\n    \"expiryDurationUnit\": \"MONTH\"\n  },\n  \"pointsWalletDesign\": {\n    \"cardColor\": \"#d4af37\",\n    \"cardTitleColor\": \"#000000\",\n    \"cardTextColor\": \"#333333\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"5 SAR Off\",\n      \"voucherNameAr\": \"خصم 5 ريال\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costPoints\": 100,\n      \"discount\": {\n        \"discountPercentage\": 100,\n        \"maxDiscountAmount\": 5,\n        \"currencyCode\": \"SAR\"\n      }\n    },\n    {\n      \"voucherNameEn\": \"Free Dessert\",\n      \"voucherNameAr\": \"حلوى مجانية\",\n      \"rewardType\": \"FREE_PRODUCT\",\n      \"costPoints\": 150,\n      \"freeProducts\": [\n        {\n          \"productSource\": \"FOODICS\",\n          \"externalProductId\": \"dessert-001\",\n          \"qtyFree\": 1\n        }\n      ]\n    },\n    {\n      \"voucherNameEn\": \"25% Off Total Bill\",\n      \"voucherNameAr\": \"خصم 25٪ على الفاتورة الإجمالية\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costPoints\": 300,\n      \"discount\": {\n        \"discountPercentage\": 25,\n        \"maxDiscountAmount\": 75,\n        \"currencyCode\": \"SAR\"\n      }\n    },\n    {\n      \"voucherNameEn\": \"Combo Meal Deal\",\n      \"voucherNameAr\": \"صفقة وجبة كومبو\",\n      \"rewardType\": \"FREE_PRODUCT\",\n      \"costPoints\": 250,\n      \"freeProducts\": [\n        {\n          \"productSource\": \"INTERNAL\",\n          \"internalProductId\": 301,\n          \"qtyFree\": 1\n        },\n        {\n          \"productSource\": \"INTERNAL\",\n          \"internalProductId\": 302,\n          \"qtyFree\": 1\n        }\n      ]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        }
      },
      "response": []
    },
    {
      "name": "5. Stamps - Time Restriction (Once Per Day)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"STAMPS\",\n  \"nameEn\": \"Daily Visit Rewards\",\n  \"nameAr\": \"مكافآت الزيارات اليومية\",\n  \"descriptionEn\": \"Visit us daily to earn stamps - one per day\",\n  \"termsEn\": \"Only one stamp can be earned per day across all branches.\",\n  \"howToUseEn\": \"Scan your QR code at any visit\",\n  \"status\": \"ACTIVE\",\n  \"stampsRules\": {\n    \"stampsTarget\": 7,\n    \"accrualRule\": \"PER_VISIT\",\n    \"timeRestrictionUnit\": \"DAY\",\n    \"timeRestrictionValue\": 1,\n    \"visitLimitMode\": \"ONCE_PER_WINDOW\",\n    \"limitScope\": \"ORG\"\n  },\n  \"stampsWalletDesign\": {\n    \"cardColor\": \"#e63946\",\n    \"cardTitleColor\": \"#ffffff\",\n    \"cardTextColor\": \"#fef5e7\",\n    \"fulfilledStampIconKey\": \"CHECK\",\n    \"fulfilledStampColor\": \"#06d6a0\",\n    \"unfulfilledStampIconKey\": \"EMPTY\",\n    \"unfulfilledStampColor\": \"#adb5bd\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Free Item of Choice\",\n      \"voucherNameAr\": \"عنصر مجاني من اختيارك\",\n      \"rewardType\": \"FREE_PRODUCT\",\n      \"costStamps\": 7,\n      \"freeProducts\": [\n        {\n          \"productSource\": \"INTERNAL\",\n          \"internalProductId\": 999,\n          \"qtyFree\": 1\n        }\n      ]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        }
      },
      "response": []
    },
    {
      "name": "ERROR: Missing Rewards",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"POINTS\",\n  \"nameEn\": \"Test Program\",\n  \"pointsRules\": {\n    \"currencyCode\": \"SAR\",\n    \"earnPointsPerCurrency\": 1,\n    \"pointValueCurrency\": 0.1\n  },\n  \"pointsWalletDesign\": {\n    \"cardColor\": \"#000000\"\n  },\n  \"rewards\": []\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        },
        "description": "Expected Error: 'At least one reward is required'"
      },
      "response": []
    },
    {
      "name": "ERROR: Missing Points Rules",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"POINTS\",\n  \"nameEn\": \"Test Program\",\n  \"pointsWalletDesign\": {\n    \"cardColor\": \"#000000\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Test Reward\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costPoints\": 100,\n      \"discount\": {\n        \"discountPercentage\": 10\n      }\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        },
        "description": "Expected Error: 'Points rules are required for POINTS program'"
      },
      "response": []
    },
    {
      "name": "ERROR: Wrong Cost Type (Stamps in Points)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"POINTS\",\n  \"nameEn\": \"Test Program\",\n  \"pointsRules\": {\n    \"currencyCode\": \"SAR\",\n    \"earnPointsPerCurrency\": 1,\n    \"pointValueCurrency\": 0.1\n  },\n  \"pointsWalletDesign\": {\n    \"cardColor\": \"#000000\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Test Reward\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costStamps\": 10,\n      \"discount\": {\n        \"discountPercentage\": 10\n      }\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        },
        "description": "Expected Error: Reward must have costPoints for POINTS program"
      },
      "response": []
    },
    {
      "name": "ERROR: Missing Accrual Products (PER_ITEM)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"STAMPS\",\n  \"nameEn\": \"Test Stamps\",\n  \"stampsRules\": {\n    \"stampsTarget\": 10,\n    \"accrualRule\": \"PER_ITEM\"\n  },\n  \"stampsWalletDesign\": {\n    \"cardColor\": \"#000000\",\n    \"fulfilledStampIconKey\": \"CHECK\",\n    \"fulfilledStampColor\": \"#00ff00\",\n    \"unfulfilledStampIconKey\": \"CIRCLE\",\n    \"unfulfilledStampColor\": \"#cccccc\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Test Reward\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costStamps\": 10,\n      \"discount\": {\n        \"discountPercentage\": 10\n      }\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        },
        "description": "Expected Error: 'Stamps accrual products are required when accrual rule is PER_ITEM'"
      },
      "response": []
    },
    {
      "name": "ERROR: Invalid Discount Percentage",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"POINTS\",\n  \"nameEn\": \"Test Program\",\n  \"pointsRules\": {\n    \"currencyCode\": \"SAR\",\n    \"earnPointsPerCurrency\": 1,\n    \"pointValueCurrency\": 0.1\n  },\n  \"pointsWalletDesign\": {\n    \"cardColor\": \"#000000\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Test Reward\",\n      \"rewardType\": \"DISCOUNT\",\n      \"costPoints\": 100,\n      \"discount\": {\n        \"discountPercentage\": 150\n      }\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        },
        "description": "Expected Error: Discount percentage must be between 0 and 100"
      },
      "response": []
    },
    {
      "name": "ERROR: Free Product Missing Product ID",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"programType\": \"POINTS\",\n  \"nameEn\": \"Test Program\",\n  \"pointsRules\": {\n    \"currencyCode\": \"SAR\",\n    \"earnPointsPerCurrency\": 1,\n    \"pointValueCurrency\": 0.1\n  },\n  \"pointsWalletDesign\": {\n    \"cardColor\": \"#000000\"\n  },\n  \"rewards\": [\n    {\n      \"voucherNameEn\": \"Test Reward\",\n      \"rewardType\": \"FREE_PRODUCT\",\n      \"costPoints\": 100,\n      \"freeProducts\": [\n        {\n          \"productSource\": \"INTERNAL\",\n          \"qtyFree\": 1\n        }\n      ]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/v1/loyalty/programs",
          "host": ["{{baseUrl}}"],
          "path": ["api", "v1", "loyalty", "programs"]
        },
        "description": "Expected Error: Internal product ID is required for INTERNAL product source"
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "your_jwt_token_here",
      "type": "string"
    }
  ]
}
